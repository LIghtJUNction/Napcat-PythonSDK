"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 公共属性
    is_running: bool = False
    
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
"""
WebSocket客户端实现模块

提供基于WebSocket的客户端连接实现
"""

import asyncio
import json
import logging
from typing import Optional, cast

from pydantic import PrivateAttr

from websockets.asyncio.client import connect as ws_connect
from websockets.exceptions import ConnectionClosedError, ConnectionClosedOK

from .base import ClientBase
from ..utils.types import EventDict

logger = logging.getLogger(__name__)

class WebSocketClient(ClientBase):
    """
    WebSocket客户端实现
    
    提供基于WebSocket的服务连接和事件处理
    """
    # 私有属性
    _ws_task: asyncio.Task[None] | None = PrivateAttr(default=None)
    _ws_url: str | None = PrivateAttr(default=None)
    _ws: any | None = PrivateAttr(default=None)
    _active: bool = PrivateAttr(default=False)
    _call_api: any = PrivateAttr(default=None)  # 已修复私有属性命名
    
    async def _start_ws_client(self):
        """
        启动WebSocket客户端
        
        建立WebSocket连接并开始监听事件
        """
        # 检查WebSocket URL是否已配置
        if not self.api.ws_client_url:
            raise RuntimeError("WebSocket URL未配置，请确保api.ws_client_url已设置")
            
        # 保存URL
        self._ws_url = f"{self.api.ws_client_url}?access_token={self.api.access_token}"
        
        # 如果已经有任务在运行，先停止
        if self._ws_task and not self._ws_task.done():
            await self._stop_ws_client()
        
        # 创建新任务
        self._ws_task = asyncio.create_task(self._ws_listener())
        logger.info("WebSocket监听任务已启动")
    
    async def _stop_ws_client(self):
        """停止WebSocket客户端，取消监听任务"""
        if self._ws_task and not self._ws_task.done():
            self._ws_task.cancel()
            try:
                await self._ws_task
            except asyncio.CancelledError:
                pass
                
        self._ws_task = None
        self._ws_connected = False
        logger.info("WebSocket监听任务已停止")
    
    async def _ws_listener(self):
        """
        WebSocket监听循环，接收服务器推送的事件
        
        该方法会持续监听WebSocket连接，接收事件并分发
        失败时会自动重试连接，采用指数退避策略
        """
        retry_count = 0
        max_retries = 5
        base_delay = 1.0  # 初始重连延迟（秒）
        
        while True:
            try:
                # 确保URL可用
                if not self._ws_url:
                    logger.error("WebSocket URL未配置")
                    return
                    
                # 建立连接
                async with ws_connect(self._ws_url) as ws:
                    self._ws_connected = True
                    retry_count = 0  # 连接成功，重置重试计数
                    logger.info("WebSocket连接已建立")
                    
                    # 监听消息
                    try:
                        while True:
                            message = await ws.recv()
                            # 处理收到的消息
                            data = cast(EventDict, json.loads(message))
                            
                            # 交给事件分发器处理
                            if self._dispatcher:
                                await self._dispatcher.process_response(data)
                                
                    except ConnectionClosedOK:
                        logger.info("WebSocket连接正常关闭")
                        break
                    except ConnectionClosedError as e:
                        logger.warning(f"WebSocket连接异常关闭: {e}")
                        raise  # 重新抛出异常以触发重连
            
            except Exception as e:
                self._ws_connected = False
                retry_count += 1
                
                if retry_count > max_retries:
                    logger.error(f"WebSocket连接重试次数超过上限 {max_retries}，不再重试")
                    break
                
                # 指数退避重连
                delay = min(60.0, base_delay * (2 ** retry_count))
                logger.warning(f"WebSocket连接失败: {e}，将在 {delay} 秒后第 {retry_count} 次重试")
                await asyncio.sleep(delay)
                
            finally:
                # 连接结束后重置连接状态
                self._ws_connected = False
        
        logger.info("WebSocket监听任务结束")
    
    async def wait_for_connected(self, timeout: float = 30.0) -> bool:
        """
        等待WebSocket连接完成
        
        :param timeout: 超时时间（秒）
        :return: 是否成功连接
        """
        start_time = asyncio.get_event_loop().time()
        while not self._ws_connected:
            if asyncio.get_event_loop().time() - start_time > timeout:
                logger.error(f"等待WebSocket连接超时({timeout}秒)")
                return False
            await asyncio.sleep(0.1)
        
        return True
